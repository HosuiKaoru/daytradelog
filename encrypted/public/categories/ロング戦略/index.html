<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"4a3a77cb1ab91b50beca3f47d64170f8cdfd0b4e26774fa5209451120b1a3f42d8e9dbf07ab2c0b0f08e6e9c569f75db9661b77ad9ab67ce86e6af295e88b19d58c7d33cb75b5348cd42bf7646abca620b07c442ddc3ec34741e232acf86b2d261573ba6932f78b21a33597a5ebec6854fa28adaee96763a38e1d0746622e6eb842b6d8fc3d24cde35bbdde66e72507272b8b5a285c51ce2c8f6552a5b87c5b81f96eadf6ea1f3f714ddf9109aad10c0f2adcb9e4a4aa6a53bb160e13213e4ab63f957575b87c06f9f82a0748ffbed73cdf8ced2ff210308796297c7a82b078d960b747dd7c9a3a8887b10fcc46bccb595e03164c10939ec82444b83b9fbf0bef1d606933eede98872e3d2b7a03993d9c611a66b9eec503888a7c9e97dedafd7f0cd2301efeb204f03bf2a93d792bdb47e63b24765dd5e856dc29ab2dcf1e1b871092180d31e7e785478687a37bb7522bae537861dae9b4d92db541d5d9fe3097e5114f5cf1f4d119d1a2e37b48b3bd9f64d9e82b93af8d31511ea0949deb51d309664f5789bafa92bbbb7ced3c322b7624ab14257241bdebff13b11a3dbd2087cbfa379e4f2de712b9d1297666f6f47614ee4955c5d6712921b17266ab84b35cd064c98816a30e05a8c85faf959ac1aaaff5739dba13588d4c39fc9b8e98b56c4aff4521baf940aa6e65691c0e6854385436c458efb007bea8c29ef79683b5b64c8486d3ea0b4dd1763216fa61073ed5214174b1b660e536bb1abc3220c1fc68d1e1b9919cf786049dd3072b25979b995b9b70857ad453eb60bac213cd45826c47a6514951af1acf00ba67c0b30e563410b36bd66e5ded7d32ad822a3afb1e73104b7510ff6ca285ce353c6017d0e0aaa9dcd4f3eaf3987f2b448adde245bd649e25dbb262a80b1de08a21cba06cb5d6f2a6c67e227839452b0b7d745d0005359fe7194c994d828549fd0223c12e0a263fd01fa619342cfb8045e239767b4ee82f8b519b97471ba017a4245acde1b262bfc4d7cc2062a936ea8b8c641215bc379a2b8c9579224daca26ba332497ec474c319a43d6bf7f6125676949a46720784fb1ea800fe57d113cd6bf84b8294273bf03d3367c5f7987bb7d023b5bb3bbafd0cb54bccbf385a355e66cc743186b4ed32dcfdc548d49230b4dc2b4d94a88db6678466e13a3370ee9309a1f3cc35f82e18dbe76c532468012a13b63fb0558a5e92433a941a5032c916a67e7f13441a89ad63b68a10f3848e2e21abecd74b91d60e7aacfb578540d506fd15862588d26e6fcd9c7dbab4c1c2fef4cc972fae5497d469a704bb621f9c4b55212d88c90d99ca9d6a8dd4ea44d06e68a39979c38ff8fa1acfe0649a7a3755c1954fdc2fd1df73aa6d90fd1b33682c2ed3048e4ff3e2aec86dc3dbcb8194fd3e5c4b419aa60e3325c64a184de112b4be66116918f340bb8d623dd835650b806752eebb45aec65bd2e8f53b0367e5e71540369f256692c559717d6c6ccc97d815593772c1bc08acc95429e8e55b5335075f8041d147f480801c2cd8713b20b00e708eae8ca447fc8b3f0b1dddfd882054189df529c375180857858b27fe9933feaca1d5430dd286b74662e5d8e343c0b9a3e470add2c2b41e72ddd6f61acab420ad4df88cf5413c8f8771b797994803920bfc35687eac34d77611612c7490c23006d083df2cfaa2b7c7092080a70dd6207b0c26804e7090e68a651a7089c9cb8fbf17c2197435f6041878fc66b750509d24debab5834cef8be4184000e96ddfc05ee533d35231a44982b4151cb89661f10df87be04955a62423c8184be50c9df4a6640bb9c56a75dcc1cb8f3e0abe011321f986340a50c1208f17f85548847e95c9d7f49fb9383ad9226ddf5b821525c7f1105f70a6f98c99323a31af72c2800d5d5ba7d3b563824fbd1d8285261da48daa549b7db549e36f2210ee4d3048dec01713cc044ff3e4f7c6e656e49e702e158fe2a76eed8968cea74387779338c7c034755fa142d27ac35e1b02d4bf318b1906928b23440e41a52870ca57b6edf059e89953dccaa674cc42c4ba682e4087a133e3041fafa7dff640423ae741ecc8284d2193090b34d248912cd0391b25224651e338230e0766eed724764bb070858d7c9c3f3a38a994b23ebcc1550ac9652d2ae23f8cd4692db4195146f8e078f7259756d0af1fc1622f0b8cb6c240c9180662645cae909754e0ac32bb7bc3a11ad89dbc89962487e6cb6eaed714491bd102d8578dabdee53ca736d99bf04eb9ac209ce7fa094840b069a5cd85b321199b82b72b7b7c4d406a9e627ad4f1810ab79678880caef2f5abd25eda141952c4409ce7f3a1bbe234b576d31e61b8a5fec4ddf65a048bd2850f2c03a1310e1688cc9caa64a7457ebe62163fad3e5e148a9eca4e34f8283115963b18a5a1f8e992f2bab22a992f2049ec770a0e33011796fcf36338db30bd02526ac5df5c4d9f65d57a8d98b189a82ab0f11c2b11a86d1cec9b51289b1015f9445ef120e26dd8ed5ae9a0e44dec37a06e0d9da93c922988ddbecdaf001c1e4abe372b92b1cc62a3f836d881af75e274c17cfeb44377e116fbf4f03e94b516e31f1b25c9104065b7e5715282e50c3ee630baf9babe38c0f0a124c92125d24611282ec8f9b03afc60037842b8a5237134d3faf3d92124a49edef3c89de985caf40c5edb7d7eac15c3cdb5e78de51794422ecd4348d2281aa452692cbfa0792d9013927e0a6fab17af82c04732f783f1685c950513bada6b3083e71efdbdfe4b7b2a9bff37e0dfc3fde990d45aac9a3993c1e7177937bce28d1f1d99fe5d25044610a5ccd2074968360928a2e37f824e1cc4e5f3b9d3cc6edf797dd9d49a01c028d56f86d3b037195671f6340143d62d4248821f5e49746913ec9e9341eecfac44ae32a25ed0942b6281346100ab96a05a64d26cfde3d7a59b4cebe33eae7eb0ad8d1e60b7a03229bfca1146c80870679c04cbc408f20a31ba4b6014317954b0c2e25b718818f6293f324d5eb7d058efcd9a58b2f5b2a9312387e90cfb689867ff036e9b85e7c57e8ba9a3e412d3171bda4e09d7d3065b43d5886dab372deccc8f674ef74c4899f522fe5454978364ab14799e1745845080005ed3ea17dcd23a518fb7f96df238318b170df976ff7fd74e5602816da4ca31f6b3e007e8419b12223e61a32c6551f7bda687ef6c1a0ec7afff8d006cf436bd30474a2e8c192764f2914f347246ea658db404668a115fed6e7e950b96bedf7699d5ba95c0c32d6549e20926713e89aa9e50faa6e34356632d869dd5c3d35cacbb9a6c93f8b62f2e3604c82a6c38584879e4248c07392e16e4129cbc4c90be46ed932838cc77bcc26fbb4776d89855aa8ea5a12175ba921583ad0a1be186c1821ba17dfed9d5ab1ff2f6befe35f6d87998555b147ac98be56af73dfdfa5757597010766d01d7b2ca2008a44babe3f6458fe809d1b83327e714119dda6d49cea9ca99decd609ab2141acad7765705060bdd0d4db8bc185d4b4f230324d2925a09a2d7c027843d486f3165da48d76db223e21bfe66482b8d913ea83961002c8df3ee4a05b5f8566733ce8c01b9ec3c9ef92dacccd5940b179ebe9240331a65e7d715453c3fa9788b7c4372afb2cabc3e28d90f236840b5678fa51f682e6a0f680dec8ebf66320a391f0e4bd651f2e0aded299299da2fcd09cddb4bcab9b039643ccb9d82201bb0c75478fb9f9fae537cb47bd005245ca8bb6765ffb61cefc11d899bc4fd98b8a8e81942aa43fb6859634bbc96490e9fee7189b1dd327ff153b0b52a8c01f73a508348c55aeed396d1a04bd84adf97b559e5cfb0bd3c095ed160dcfb11276bc6e19ccdc875457907ff5598ecbec18dc003b0ee1b91c4d8347094bd7f48f299d7308967cd568e1637139d7e3f6e8ca023b81be5ddd8a232718533ffffbef914a0083922888db72bd3c4f64a83dbff99737b2bb9bc3153e42709964cd1b303b25b90ba0e86e925003da80710e75e1882c8a62bc0bc82564cb580cb6849ab0757dac0b90cb60c272de5679829428d06005e313a49b720a1c4480ea62ef433dfd862774c5624c3c951781f6669c70a194098370a61aee399ca5c1b91761f1de07f60d950e0c16cedb9350d7b870439d9d5b0d3fafda2794df4bb1512449c1a0d4850fe665be995ecc3676e194b97e74ce23345d17ff3113403654ecb21e19583d39389c7a76b5692e404584f175762f4d779a8a0af274cd24aee948ca167746944b03d633f0973920a2e1db61deb166849f1548aa69af66a8cef74340fb9450b78c594baf322327cf9b71b25adc261aa9b63b75245b91589bb477d82e20057fddc4efcc942d57a1c192cbe9fabc6eab58fbdfe1a486a19279773a048ff1ec4b3c3ad95767c339219f703f50d0c7d3c13c3ad17f3fb2b649b0e692b298736edada02990ae6abbc0d1d0f2f4730af1e25249052f8dd76a8e99af85af5027857a0b7ccdee08f5b3e31207ee7e37edb7319b649eb27104bca02421153359d0f1ba5bcc2bcf706d6528f8ef7d6ad5528ca2416ca1c4862062523d0b81137d0823bd749dae9ff03e7d5eb4f018adc7196af614584900ad45dc832af668e7f1a448e1d59a8dd3f8cd6ec00e5bd45072c8a4bd313acca93ee7bd8c929396335945e151dbcf2b26ddb591a755f7a0df5ec7b4aa031e9e1a43d5d50153f6c6ce2390f48dee38e13ec3f9a13bf9f4b8dc9152259a9c6eb1d076960aca22eeda7352d4e7aa1e95a999428f281fcfd83d411a4a8a5787a67057654cfd4edefa17712790c86a9d0176216b710fad0cbaa2bcddc7ff88dcd983cd32e462b6e89fd04b9a88f3940d5b536f9405a106b40cd5280e94c7ceae146b2227fa8f1929f2b6cb2c009fb9413989f9c3c501eb0af98a092b5f14dd5f360d1736ea99e7f8dd372ba88e6d0f3d6eeb5fac46c04d55d5d3752ea14f9a20674739d671af031d30b2a356d7d8b5c22bac52193abc667e414a3c17e8e26efead4ec3961c03406579e2afe3bca6b426b07c92519324aaf6a94f6702f772c450af3c9fa883e67c2ffad3ccf9d648d368817caebb08d9da63a9c5246f76829aae54258394fa2b88e610776cf26e18a3705a866971273ea6661cdecc088f8dfa2c4daf723f768af842a628f14f58eaef03b2a9246aafc58f7faa8b18c919810719f436dbf5ec89a9aa0e8504a41763d0a2889c2d2544ce21582751c051c27d8eca005d9f777b365cd179ef5aaf2f7b1be503c34f710c200dc8f6c4996d7d6853eb07837feea41141d32729bb8f2f1a4abc8c3be3b534faf69a832ab5bae5cd1c4d0cb28e0567bb3390706de7587e7cf2f01b18b10c2cce681ab12e0be92b27b2c2b060d380c675c7db8d5ff2b27a8574609bf8e1ea00e6e5128bd37fdfd730b9f199e2f1c6382b7180b220ba506188d658304db9a970591067f19e20a3231928dad2784b78615c91066bb6e4412322d1e41be10b03317235f6919fb397ef281046ab5c445ae610958db30f12c1e38c59cf55c0d5032aa0b9953ab33c913f9632b4dc2ee990498c88566f59be01d3131bba4272bb95739516af49c1f05f20b15fecd81fa928eb9b95aa2d6ee84fe279ecf6822701471abe6d60868cafb6b10c0d552e3c24aa295a6cc653ccc737d55bb038ebe1c8eed2b9cc6e4412ac933d4a20e233e89e4a3730279263a00e3d9d4041c9808bcb01cedd6f9f1e35b9bfab308e39f7313469e3a7b7db852485edc1281b388ca12138fe762d0385d53bf6c73ce6c2d2440f9568e7b2ce6fbe8da5b547b401829fc67eaf6a033360743efd0c5006ffa6cb5ce483d7b2fb6507fdb694ce93749f46411126ca83769890b402acd0cd9d7452cf3c3bf96a559bc261fb73b2a00f10365cc84da8df900fd324bdf3702dd282677984fe1ecb6aa818a0538a0ee0f3960c730f9ed018b4a335d8ee76b31556491b20e753889431526b1acc15fe321dc723c1445553811ff75078191419938b7c62da6d1b133bd189e956eaf4fcc1d30c4fe5512a82c2cc621beea0dc8ccbf0ef8dce5d6a8a39fc17276dfd9e55ec404fa4b7eda0f800431cc8c87fd916d00e0574c3316652343701697bd544fa976b1045493616ee4181121a46f9a13a1de82a85f979a44be33b085d8976429517962bfc42466642495a662b818378ed075234a4625b78e251702abfcb521270be5f2e067f32bf6bc382e2b712ebbe9c8836ef9585a0e432bad64b8b3e2fbd9acc18962b0db02a78f61315891e6247a1cce9811ebf39a10a4b4f489980bfd6cfdbcab00b9c431c0530003a69f709c245e610762576c7056e8237f3d397c7a4b5af0a199c77db87acf8289cf06218878de0eb6a3ba4f8e6241e35517a4de3a858f7a24e657b5add23c926edc354e341a5f74aa23854e6ff95cff8a4e0d8b989a019dcb8931000f6e9e673d26e4e0d573fd074cc3d70feb9cd35898cbba0b850316abe2315ecb54d00893e111f63bfa6a798cc5c3a042c15acd3f768039910308deede710f80c1300b1cdc599491e531ab3200c10be4a4bcd0c81bc875af153e3356444b1c6b8b5e54e2f29cd00e836ff39b7a3b45c4342aee493206d764b0f56a2027c77771b53a8e8922bed78d721043d933524f604916885b66184d158e692b12ca56fd7c9f64cccd9936af0c14cf73b74a57c25cc185f0fd9904223eea55e26765718b6075840f475965c2498889327935adbc7b32fb01bf90b77e8c047fb7a783203a4166cf82077891b678b74c1eb42f12e7dd17dce6fd5284d56335c24ee3d975f3cae6a38ed636f45bc1b6d4093f2592ed69629a705342f7aac84079959de4cac2bbbde4edf3f7aea96ddc595aba8ffff270a9a8b4c7b129c1ea6ed4448f2c27c160db124d5da8638f480923cd95d766f20f4558b904edf39b7530d70325b2fbde758463c917c2116a62bbba3b3813d7f849572d1347ed058718bb6b84dc2a4811bc48cb7a5e8569c27f7a0c5de62377e62bbaa64815c631d8a4d447c6a7edf076cc5e1e7a7b6d913cf3480f0e66693133dabaa43581d7db829a1210a58ff2337ef54b4b6b814a332d887b373c3fc1050437fa1ea69e5afe120ccb88f7d1de36b51c781df851badef89e0c12d06af165b2ac450f8e5e82580bd582e20f4cba631879d4ffdd46e64d497a78d224d8cde37fbcf4b7b59ba1546e5fa57b28b3df955f4ad7586fa87ac863970799e8501ec35643311be609ae04e55e3d72cbefb3585e54c5498adecfdf7d8fc04ac5bd6032fbbc3fb37588957cd137004776c5d33de251c1c7da3a9d3511db4b3dc907f8d410b85a36ab563cb6f40f9b2e1f92d7e40c3000d0ba85361578e52aa1b01acdd9db0cef5d90ce658e06507c4322a345385ecd603f5809b1b5807bb83b1d706a3b09f8c595780f4bfd88d5682f719a1dce3d9581bf052401a5624af11b85bb4c0763a6ff72795e9031d7abb851b0cbf16db6a55280a2984a9c767ebd5349581694d145f866e4ca529dab87245425b7313f4b2d782f651cd9af06e5b022bfb36c40a76fed42f44112b58229ff8a2356d6b05c3e69eacc13a0253373f8d0e3e3222279265e1081de780049b774d6df70ef1116ee0caf26bc25995f4b22abe51af90b23bea71023241e1dbcafd76e189e4bc9e5eca598e41f665afb26820a24e86cd99863b35c80f05463848fe367c4f6b5199ca3fc009a6fe39ab80c2be5530a0b535b55fa9a52235b9dd5933471b09a756683baace9397e88663ece1e835b0d940b195375cffbb1e3f33e2c084ab332d2fc2623284636c287c7fce7099fce6646851adfad2d9a357ba0b4ae3f52d75ab5bd94859a1cbf320e71413e53f3dc1d474408613371b4c8875a435612a87368fbaed7cab0474cacd597bda0f6e5d2a8b8cf9792076b04893d792c0a61ea71be5622058670b3aa3eb33ec059992a357daeb1fbb5db42fc3580c902639c5185075813e158bc98e639fa352edac5c2916f29f944c39c15a121b5cf78cd827ab427e9661c5b61eace89fcaf924bb56caa025df5a340e089f1a035c983e55ceb1fea636672f26a54018b9c38c7d04b8ccbb00b0de5c3cd6d0e2abe2ee2ae3a5c2c623ecd724d923a84eb65fd7675c92c947882a7b77e119d2a1cead51ee05c982c3505f648667d491a48383235b75872fa6489b52ddd916ebff675ebe45d8ffb2e07f09224a101a27e6b70bb21f61d9f0de9875c5cd7967d0d162bd8c606eec3551b3798b12d8eef0ed640d9ce853c605812ec3fd5df63e741ab21f1d11168ee9a52446d343303e915f7e8129fbeaac20092976c68a5d49b024f0934ca72ee44c85da04bd7d27fea6ad2f960105dd5765b865d51dac050d8155f977cdb279dbaa28202814a89eb9482029df6a768f18c1291f03bb7fed0c5d3032d55711fd86a574c5f5cd5ae8e043944d4a284740a3591a3d271af4cd15ce2d37f7fd6569884e22ef1874ac50f02e47ea57dbb42da52b11a8e516ce47457f8658d93f3153804faf7792ac75930d22c6da6f164d52ce130965fc3211ceeff9bc948de6f5e295442117c9cc45ee355c8456b72183e3858a693fa769ebbeffd67a5872120decd43072d957a8e02411f088915e77ca823573c629fa6257a3821b588b30ef80bf5eb0d95a10b96f63688990e5826b1e2adb67bd6ecad2749c0f1928bf13870be088b7bf1c73d95996a3670a103c4f6865ac2bb2cd4acc0ba6e61c6497fdb34cdabd1333516fc5d55920df8746f5e3821e770d61028986c3687adaac11ce460486cbe1d481dc5b83204f8f24df3dfeb5016db3d97d9eeaad1c354029f4a500f823f0c583cb8b66fd388d67fb44acb8ac61f93e2209a97b2b24d1de8c3d0829d72c5f5b46000ebf0a4859162e07b1cae2d75e78e316c02bf7378527c4efcc31bf8849ac5b43de94a6a3c425b7b2f91f7abe301a81328a1424709b5bac54e4c7b25d559b2e5bd5c48b85a27c902afcc95ba1b19db983bc03affb1d4a470670bbb948a72cbb33e58081f3f0dbe455cc72250f4ffc8e8045dc44f359cd77b53ddc600eca1df1bd831236f9bdf2ebd9d25b7e182ed70c6f9c15ca3fafa3bcd27cc582e72b6e0d8042defa6332ad6b7a2e359fc113cf27cb84aa470651e61bf1a9c91bded86c6aa75c485b49377924f22233ee49dc0c5173991ddd8c2f0ae125cd8d85206138ea4f237650207a9204b5f01d55e23a74bd98d29032f4574cfdee5719ab3b55d33abc8a649772f2bba638f2618398962b6f3355ab295b0e2508ebc9e544ce170e0e7a54d67e496cdf458cf1a074cfa82bc2211eaded16272492b358cda875c3ecc55ead4b4a928d560eae52d9a56b6d48e616dbd3eac53402459253bf191c3a52c39dac57a3c59e8d527172ef85fdd8e39b87f9ed4a3e517d8f7647951752d4c6d2eb1ef961ca84beb9c5f015e65e5f6e794984f9d11116b68ddcc547b99bb67d82e177ecf0de1b0124842845671601b2e8fcc06849ba903299037d350de3e616f38f4f9d6a04f92fe52a2cbb3834d906aab749b96ee22c5b3da83207826d1ab191e1c8379caaf8f347575d4179f020704b6246cb2bb72fb272daf757e2137cea0b603777e901d8dc6b96d875e679cb76d3294eeb2cd0b16dc08c0c7f6be1bab02ce829543d763ffa29a52c15cd184e39bcb8b14b1b15e8d955fe42b839a1d3345760dcf8c2a81c10e62035c3faff61029faeb29b48d999062ca369070467b2bd2180e6efbf8b8ae97d93efb8352064d82ac9f49bc51c0c41b54ae943262d01f058920b64281b3904fd9087056507798de5e00a77c841fa32ad349d310515945335642fbac7225f919d44adef6ae909792a508885f5ef6c23874031e5e0fc50dcd5fe7de35205d1f7816449b2fe97cce66e33c8ae7fb4547e505c59f2716d4cc84447e703a5e00976d4710b1beb2469999a5f1d37b2fa6b8e7d3afd192c6fdd638d1d64320589b66eb0bf9655088d882e76e83ce928be72bab92a3572d52d9bddc44c5da091cb20b76e9dc78bbe5ff814bd006e73d56f5bc6e3da33e557072824a150cb0ff0993ace2e84673351bc4aec85e9e4de28e956d285515c27603f8d83dc182318eccb0cb20ab3a9c25e3894bc9d530eb289de418bf40a0b8ab51dfe7f606eb1deefe1965459f583e310dfb56d7dd516a8dc1b86bbcd6ccd27b934f7705bafd54329f631d51e1f0f5eb004bf494d9bfc564baa1655ba9e606186ae4a9e5b7bdd6506078d7f0db713617bb98183406af49228cdddc0467cfa7b06eedb2ba3145c52b2ee067d781f314d83e779ae312877fe6fb34fed85019bd44a3b5bb6b057ac843426340f405f67b45f2be74118b64afa36a5d963ef669b01bb13d69f1f3ba43e319b2196c9893cff169ce1e51e3317c3befc737454aa9d8ff6fd78cd2d1d6bf18f83cb002b082cfbf6fd59cb4b8fb3f9366510356b115d64e1f26f63400ec5edb58e5427e99bb7780eb6eee42c3eadf9a2c9379a53ff5f24dc26f6cecea4a76c4e6e92d0ce6796e0a72d22e7100eba2103db1e2025ac8c251df4976b74680c5bd82bd5521746b54f45541cc51439f41735c44aa4183b27872a5eb949eefb51d23408cf5f8b73432d7d24626f6d31860ac2d38bedee7dbbd823db53ecdafe33f53c9555e1e19fded357a26078aa8b7f600a9d23aed36c830b20b2b467d70fa1281a3b0b123c327cd2d71b912925dc014ec493c6d51853b6cfb0eb1837d813e1f22d68be1400ed79fb23465e484690f4d46f1cc54f855cf35ecd1a32b11aa3906d2c6aee5b5d4e87cb5204cf4358d0ab286d27702631501aa1bdca40aa7f0dcca2c8f88fe5e75891b03525217f87d092ea0138fed171742a83bdb79271d234671a4185fb52e25aab13b7a6b0d200b8b80a496321adbcae224b64737682930ebee31590274c0f4cfec995bde16a40dc6923a09c70ac0428480dbbfd59810cb3fca2dd58de203ae35ab9c39f615da3e34ec562be6d7b85064537f9c2f2cc82e108abb1d3d058398cb7c25e44928e5874cd5889da2d826cd837f7e30a58dee838a17e1175f7e2a7333fc74ddb24399d13cc16640ea2a1e64580c10eff073d3b385f59fb34b2b4442e79769dd26dbbd1dee350caf0a90b43a17c4f459fbbc630f796e3378b393933d7e5ceca4282481a362ca1471e6ec5b6b712cf6f178c20c9a4a8c4bc33d0030d49b2bfd36fb42add531da0043cf1360e5c3374a6ac2a3f8520b79f362bf111939c8ecb26e7d5354f1c61061a23e6eb2fe81e023aca62849e8dadd541177a227101231aed4ee6cad8341ec4bb840b025c236f1664101c4bf66aabba4933ac58d8b780b11adf5918e19056f93cd82b20c7cdcf6efc4915cfd9c31a4385bb2b925c0193a5c4bdebfb371ca22641c1de736d94aad249bf3f3c76b0bde686a3bdfc2c73080e276e0fe4283e03431e670d04c9e7565295938b232026f8b6a2c71f50d75fcadf8161151ede428b74332ec38c3a9a836b2dca3e1c9cd4d640db60d3be919d1222d9628e267fb514ee81c26a2abbf660693abf58b3f6ddc97021178d7c4f9e1f5d76a51879a8e6e0fd81a7c4afad0f7e19dabf4b92ae7f5bcc0b70cc48e72979ab31aa25a190b47e4b3fefc2df2be12b3db790c7e0c417d60ba6707dea88333d47aa53b524bd70d2640c988bdda6dcc68f12af51834f9dc393856c653668967f9a147233770fe1f6b297bbcdee4f0219917af242cdf928ae05ef5fbae2dcab81bbcf09445424c26952601452707a6fc5c0007eb560ebec09d53c6e217453f25a188426d0a7d5ee52ae40f7fa4badfbfb049404f802750197d88e2f55814007a41a22e55a336f389a0f4885f35f4e69b866b02ea37bb38787cf99f74239ddd7063e2eaddecf0b276dc8cb10d958c2370edb326a8e6a8e47fc40ec56ea3a10db1c7cda3e0ffd2342421490a1d61d091e3863634b0e8ae6cf8330eefd9fbfbd5994324fc11e197624c183649b29523ff7f3164fd608fc533ac3de5d25fb57098728437d620b7863f2f2542e23810defd8ac427b34f0c6b6a0bb1ec66a9c886eb9ee07e16519b8764d6fef6c09bd3701ae1890015d4c927a88f6f993b11efa1c3d12f44cde4925167ca1755b0456ef6a0cd802da47ab4942d016b88288fd955489371e1eeb7f0b4f09c55210133d977e59c4a973e9684d9505fc5fa44d69a3cb1a9834825d6fd6082a13dc6e6c56438c36575cf25f314167ae2d1de1b3c1a032aa96059cf9e8afb89f2baf0f69ee00df8336bb562483e94de9903aae786c6667b02f291c7a9da2a6d36bd9fc82379e4ac413bb43a6a01cfcb8d80640ec6889632e3f3deeb02c4938d318b4172949753cf77a4be13342afcca9a7cc483bb683148599ca2b96a7674e8c6c69e8e89ebd23bc84f8e07963c766198d19a56200684cfbb5370dda94ad93dca4a9296a6f83fa0de494dee45c9a61ec8d3c7a43c2e72341297f4a550c588fb9d38ec000653e29acd92132b6d79b8eb699ce4e8aade590381ed4d41324eaf6966ffb37c3258c1ab6b449e43a8b378b74ebbfb75f177fc0352c3837923581ccebf052079a367e8fa5776fddafc5bb4bcc6749f36dc87367800bd3e4ed3a95af8d8978207deaad9d58b595548a5b6998b245ff059ec67b8b3bf08f06679869efd115018d343d2043414a6bed530a90d8b1d60bfcd4de010d0acbf6e3bd27dec227ee453a86da2bd08e2af9f716f3961c4c8331025341d93d3dcae2b4c391c312cc3e8d53b5e090c318cd76377eec0bac6273024df9f36b1e4ae30dc8a024a66e156f1eb6a96f64a0dfa696facb8ee88b92076cc5e43e63b56d57ba88624e0333e29c53dd569b8848209b121b13f653cb7d146c5b36ea9949362c06a6189e4906d93caab9460f8b668a28c472ae3463002ccb2d71f95cb8fba832a2a0d8406e9a1ffff7cd017a0f0907f9c870bc04d4f7ebdf2d224a8c6e8a9950589b04fda045cdb9d5c7c03e81fdd0ba3783e0cde9b5960d20ea0a0f733c168aa0955b41e90de3cc30399b74bd17a389b299d8057f7443975c823924322538d01ac72b1e9bfa5ae6086f1244246e8f8006ce8ef2c2479ba56300b7033e00a79054c812c8b6708ad153492e925eb694d6ffe31bba2d6db2294360ad4e56b56e18aaa50319c4d1606e0eb53ef62c9461cdf69cb692c0e12868f01abb740ba4e28138a0dcea056f15adca411de10ece9a3247658ee4bcd13dad7e532963257dbd090a72126516b7e9428706686b29932901d0df2fba569d3b12fbf2d51f804e635f132fb48e8a42ef0756ec18ec6519f1d4dbb7f6661c268beba1c1aefb7ac8432dd6dadea3cde4b0b882ce5b26233cdb9dd95ad0a7bca0ac82891f6a3de54b44e5220d218e05680ce05c7874cf6fd450af40779318bf9925860df24d7332a8fb0c208bcf3a4454024949a0edd92dd0e86836769e686b06dc07a670e30627e28c4d8703e2d9d9b90ba89952d0cedb6eabc53a2155f47563a4bd494f0dce8bbb6765395a425cfc95083e594038cd4e2e9df344ce72cdd093e0422bfb69f8f982e0f40a21aab12734364198031f9ff1d1d597d285189bc86153fd0b2c3eda5889656b241764cd5ac3842afb8e078a9fa38e01ef73f54dd5ac78af767b335cfe63c76ba30f53635f4600a0555c4ec98c633bbdf67b1dc9c53941bc1a857573ef384ff9fc95082f02dd8eaf55e614348fcfd5fffcc5114b2d93cef02fd2fccda8a7c492874ad8f0c12ff2c06930b2d6c8fe6b041a570b2d0f994171a2610a1bcf3dbdf4831cb740a31002281f545fceb8e1d1e809a112e3f87b3cdaf4743b3afe4d9977e4e90bf2e89f5b394c90d8818be409eee69f636bdfa2d2d67c1f816bf18a0ddeff44a345fd3fe6603a7b987f3e8ee29e2dd10221ecc6abd2bb89fc053d75730fa97000cb53bf0e27138a7091af3f5cfce261496672ba0fec0e62f4f2f57864472c2302af27c9075e736e0dc25dc825014a94f96149d0e919349fa0ba51fad8b3e44607d48bce0c37a55abb9afb0f931c622ac9c0d363932564a181d45c77394bfda566a8b955f4b842d914d450cb281fad175c4d40bb3b52ec5b9b5a0b9bec4b0572ad9bfe63377cd2a70725e8322f326483cb4ccd7abfc708ad34bf43fa707c8815408b0b3790704d30d684fe03faa3f2b9673c64cdba3fe95c8d8b4a2e4a441a7871a8871a0f5cca8e9d4c64c26601ed83df7a41dcff881379eea8a8ce6e05df11407e1001a4ac013d0a0cc358030c27da1eaad19e814828cb62aaa00cca21aa073cefb957abf009e27658aa69598dcfb2e81be08bcfe159845c15a94d44e18f4076dcf9bb4ff3a4321129d6ac88feba4058962434765bc1a37ee70e9ff1e5ea5e30a89fa58e8200a29b8001156c513a6d626ac9484dad85bd612665bd3b7fd203164fab4310a9ac31e96d441dc7aab1dc28812bb0bbff7d78a1fc687e22ab1ff7c4bdee4b84222f9cd7f0c9997133e40ccce7d382878a863f8fce9bc9d1b98e853a877cdbfbb95e0500529998da0d0aba8c5d16ef7188e295f286be1da7a938a30d13206e4fc153f233069118f230898628b084b18a26a351a305d4f35507cb66291727f7576b5d7b8d0ee17eb72d226d38c16bd78122bc0001e5a3c673790c450105b9c4179f0998e0497ff63c1494a6d7be3b1654551803c54efb393f9396c4f3ffc60a31fd2d179fd95a9298880ebe50e28b40ab2d7fc2cb12066a23f4d70ed5d7c604b0ada73034c2e869228148f3194abb33c104c98255c600b41fa120dd005d6c646c926e24d8a70f1c6e7fc2603f5d5d263e51f07976171599c8e1363addbb5f19ff085f7aa3e0c5283554034cd34111254c1fd957ea55276aba3ab139aa46cceb5f401489d7e7a39c10b58952fa0bd74a1835af30207752f10668ddf77a3d3276853588d5d526b4a29e459e080d34d4b24867976a22518362ce20471aa70734d878e712bd5a37e936f9ddf38a1ce7769508921a8b8ac9577fb13c6c243a993ad045a5fd53fcbbc79acaa6da3999317db581582f0dba3d9968d17eaadf3ea52630d56a5bd30494cf3754a1be7f3a02016c8290b192f7839e28b7046d015a696921d3b9a5ddfb2c108e162559c146306dce62389d3b6785d6dab19490047b622974adce7f89f717f9c9544c8405c91f0aa464fc4b61977b45e8dd911a96370bfe1083e32ecc25e6a5b3d64744097d5a5fa7cb1300e13522dc4b51ba667ea5b11cda7989a9f785f866918fdef74e2389dbabbf9ebbafc19121fc252ada8555e7a8939f674b5755f57fe902b2f5365bd5b2d6a2e791d914a7656010a927fd93029d574a7351c32b6d3cd8cb6915733c1b034c0d4e19d4f13c76df97941746a715809a30e915b09dbf721dedafb5e5487e7f2398c29dd90d6ea8808cda0a76f31a03e4ad7a39a34bbd292615c7bf959b10279b5c1417e73b4eaaaa24194f98173c8f64e5ba6cb0cce5cfeaf171eaac2256939a4ff6f57c8676dd6a95d81e80e79b2b0bf0a558477becda0d5a0143c648b0b923e72992ebed446c7ea96aedd7b0ff947d9aa151cdc9ef564c5ea6a7555986f0e9016e28eaad037657a5b815348accd8c5b734950204d4ba73b5e7918d868947f674f80b6703d1adea33291dcc43b64de41709fa537ee6cdb5c5d2b983cf3b7ae3bdb0941277b5a6364a9a67f9889829c0e69904a6ee3f0d5e8611dd8341abcbc84bfcae6f208fb7d669a19ca44562c49a5c1bea56754a56b4524975a135a501c8ba16e51986af4e85cf2e1c2a86aca3d956a0aabd25bdf545b2a9cfa8df76dd2cb86cbe966b0d863e416f66e2b32d8d4f01c42ae77d4b927aea27a05a22a372365ed836cf6b5f8d9f9c96183090f7fd6ec0d75a33720de0df2f9c9af4a9764361622dd8aa4313054945e78a991fd341e2f3fb652b9d8e40a1d73d18a96ea0200b1240dec4c270f31a29ed290521a15c5323cdff7f242f81952f738dc41e405c6ff527d4f4af99c0836c4703b419e3b9a08fc91a275a6bd48648e98e575eba61d0b3ce289236cc6398e1688247689c7fa36fe86ebbb94732cc858c6e43a6c5f4961534829953c566ce9555d91e9fe506c5dae22c9263757462bef3110c3e799f20b2444675717309fb7332000f288053d0e1bb9df7dfae24aff06d7ab5eaf53673647d510b57589d78a570dbfdfe30d152de6e66a2f9a50903496582b308d237706db4b5d58d983d00709c4b7d9cda0b18609e92f7e3c28d493c7b7bc2949077bca0e5cda46b08812b83e227601dfed74f55c81f98cd8d7d50a6808d060834df9823fafa2707e3d76b37d6930dcfbf720af6b1decd4747d6e6382210d4a127b93ca4f90a734ec5fde98adb66f8e52848e48183f757cf321d7b015be39537e305eb0b0d1846c6e53d3c19f9cefdf8835eb220904a453edceea354d542fef6d4b9fafe93fc28dec7b52790093541fff9fdf5a5f6195ef6b462e419f5cf5e353130db8bd29a0cbc16e9fbed3085ac65528944025e3ba9012b8dadfb0007baf887edb48dff8c54b783122389de0204bdea5337a46425710cd6f1f1782b4e3fabd0c1204e9d612955ac42ec32155f8ea0921c9f473d95012f09184929b6490faa416bcaf56ee245cdf104f924e8cb955f2a366f45478cd02945da68a78d19d571bbac5121489f3767d4f273b73044be1a1fe13913e53d5fc9523587a140486d497a0132126c70cc69efb69869a26aa1b225860cd025e497f822f0645cb173b38f88f0fe18fb3920afedef1f3694d2d4985258a83fbdadc66a3d59ddafcea5c3356a3d03190135e3153acf4457fb2f329eeba746e11300134683f6c39d5ebca0f7a1ff3cac69dd73305ccb757ea2f437f67ff8d4e4b87e0e549d6e75a3cc91e278ae6c73d4b177b599a202e10739ab0d582bbb83ffe45a76574b142964a3095e146ee53f05c41146e057081b488eddeecc1546a97294d1679b05e9dc1933ae7f00b93074a4dc1d4a27314706a53fb9a68d3d3760a96be37e84dc234dba727ff42d38fff7e2d2ff472b058cd6de9408fa5090378d6cbf0e387eb223a75c54b73a6ff40f7423fe53de15cc3ffa3db34a14133079c800075146d70b6059b47682c684456296932f9c5dbd6a83ada33dad4ef0313f4bd693940b4463c67b5d0731c82ad61178736f5d0940c5709f8f7d7cfbb78818cb9641d6f84411a5404daa82d83013f12fc0c5ba4061727752627f9bc9d26481dfc9732f517f59d0c2a59bc5147bf7aecd8af6264e92f5011a777b91abfee38c94c993104a76b4073d7c8cf8e56e9abace10fa1b46516808ce36a7ed7eb28a67d09e186e8e56b3f24f4f4183cef3bb6f1550e89b39dcecdb574b3e03a1b5d186c3f7251f85d88fbf137c2084004f1b70c78a2fc3991ff99e75cc00c2d44ba1115b7fb24b96ad547ab7a452b55fb89b1751f1e44f177d468fc83340a9017cd8ea633f2b9ad5106fc28c5f13ed4896fb0d34f5fe3b4d35db26856b59b895068ab1a4d9b021cf0d30c1caf8c25b399ff66f1cb6dd05f8ad16fc57bbab4b8024e9476ac9d7af8743457d3c28fb129fbc0c42db695a36b8647eadb26147758deeb3c19aed03eb46ba7061e4200f2d673b6e8beca15f96e3f7c4b4e90e5d2990ca3e58fd29b7419fea707a16400894a6491440739b1d71320abe726f8df3485773334b28a882a602f19c993fe322c2641cef88892a9465fc976845ead760e815315908c886956ebd8586445904916129fc3a81e6279baae92cb4d72d84eefd7335725a67b95728616eacb23cd94c44adb32978ced28d6c12e87189686e0976f8e53e5839b8b76bcf738eaa9a6d33dd9ef1bfa468b131a832e748ccd31417df976834a9a2ad6ce03b6fd82e81bce8f284c00260a89bcc7b296015f359ca97246e88554467e443e0d0092f9d86599315d955189119e4ad42eaa07a9d64f2a7fe0503b38b258167d1a828a28b366c819f8e52ef5c4ea2be4d25c5455e69a6340e7aab0d4b83336d843e7d19ecd561c2fe4f057b4c4542199217e10c662d2ccc7bf4f25861c893b4c5a62442e65a991d1ee260e79e8ef4f1a970e1ed87e2250a44118f5193d8a959379311cf36df84603c8696d798b5af3e1a4d984264d79139a253e181fb9340b17e73b143dd5be24bf09e1b20124d028832e5266a09e8041017a7048b919d22ffab8a9c58b3f4b6aa13165fcb956b99c57e74590559b75f7eefe9862a4edd2d3230a9b9e560b8ea2b430c1d2fe4c7706cd8862c015bca679054d951276f8e9c1da2401a437c88550a4b416758284c94183dbeb53e53454575b89b48a73eac9ede115b4f99b0","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"414a6f51bebf16788608c4a5ab2bffa2"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
